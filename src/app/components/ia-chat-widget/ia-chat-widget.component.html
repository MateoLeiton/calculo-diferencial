<div
  class="chat-box"
  cdkDrag
  cdkDragBoundary="body"
  (mousedown)="bringToFront()"
  [ngStyle]="{ borderColor: color, zIndex: zIndex }"
>
  <div class="chat-header" [ngStyle]="{ backgroundColor: color }" cdkDragHandle>
    <span>{{ title }}</span>
    <button class="close-button" (click)="cerrar()">âˆ’</button>
  </div>

  <div class="chat-body">
    <div class="mensaje" *ngFor="let msg of mensajes">
      <div class="emisor" [ngClass]="msg.emisor">
        <ng-container *ngIf="!msg.esImagen; else imagen">
          {{ msg.texto }}
        </ng-container>
        <ng-template #imagen>
          <img [src]="sanitizeUrl(msg.texto)" *ngIf="msg.texto" alt="Respuesta de IA" class="imagen-respuesta" />
        </ng-template>
      </div>
    </div>
  </div>

  <div class="chat-input">
    <textarea
      [(ngModel)]="mensaje"
      class="input"
      placeholder="Escribe tu pregunta..."
    ></textarea>
    <button (click)="enviarMensaje()" class="btn-enviar">Enviar</button>
  </div>
</div>
